<!DOCTYPE html>
<html>
<head>
    <title>Data Titik Sumur Pengeboran (OpenStreetMap)</title>
    <meta name="viewport" content="initial-scale=1.0">
    <meta charset="utf-8">
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

    <style>
        /* Mengatur peta agar mengambil seluruh tinggi dan lebar layar */
        #map {
            height: 100vh;
            width: 100%;
        }
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
        }
        /* Gaya tambahan untuk Popup/InfoWindow */
        .leaflet-popup-content h3 {
            margin-top: 0;
            color: #0078a8; /* Warna khas OSM/Leaflet */
        }
        .leaflet-popup-content ul {
            list-style: none;
            padding-left: 0;
        }
        .leaflet-popup-content li {
            background: #e9e9e9;
            margin-bottom: 4px;
            padding: 5px;
            border-radius: 3px;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div id="map"></div>

    <script>
        // 1. DATA TITIK SUMUR ANDA
        var sumurData = [
            {
                title: 'Sumur Titik A (Lokasi 1)',
                lat: -7.7500, 
                lng: 110.3500, 
                sumberAir: '50m',
                kedalamanDetail: [
                    { lapisan: 'Padas', kedalaman: '25m' },
                    { lapisan: 'Water Loss', kedalaman: '30m' },
                    { lapisan: 'Batu', kedalaman: '40m' },
                    { lapisan: 'Pasir Sumber', kedalaman: '48m' }
                ]
            },
            {
                title: 'Sumur Titik B (Lokasi 2)',
                lat: -7.8000, 
                lng: 110.4000, 
                sumberAir: '80m',
                kedalamanDetail: [
                    { lapisan: 'Lempung', kedalaman: '35m' },
                    { lapisan: 'Batu Keras', kedalaman: '65m' },
                    { lapisan: 'Pasir Sumber Air', kedalaman: '78m' }
                ]
            },
            {
                title: 'Rumah Bangetayu',
                lat: -6.983588386453296,  
                lng: 110.4823735574215,
                sumberAir: '8m',
                kedalamanDetail: [
                    { lapisan: 'Sumber Atas', kedalaman: '8m' }
                ]
            }
        ];

        // 2. INISIALISASI PETA MENGGUNAKAN LEAFLET
        var centerPoint = [-7.7956, 110.3695]; // [lat, lng]
        
        // Inisialisasi peta di elemen dengan ID 'map'
        var map = L.map('map').setView(centerPoint, 12); 

        // Tambahkan Tile Layer dari OpenStreetMap (Penyedia Peta Gratis)
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);

        // 3. Loop untuk membuat marker (Penanda) dan Tooltip permanen
        sumurData.forEach(function(sumur) {
            
            // **KONTEN UNTUK POPUP (Detail saat diklik)**
            var popupContent = '<div id="content">' +
                '<h3>' + sumur.title + '</h3>' +
                '<p><strong>Kedalaman Sumber Air Utama: ' + sumur.sumberAir + '</strong></p>' +
                '<h4>Detail Lapisan (Log Pengeboran):</h4>' +
                '<ul>';

            sumur.kedalamanDetail.forEach(function(detail) {
                popupContent += '<li><strong>' + detail.lapisan + '</strong> di Kedalaman: ' + detail.kedalaman + '</li>';
            });

            popupContent += '</ul></div>';
            
            // **KONTEN UNTUK TOOLTIP PERMANEN (Tampilan Awal)**
            var tooltipContent = '<b>' + sumur.title + '</b><br>Sumber Air: ' + sumur.sumberAir;

            // Buat Marker
            var marker = L.marker([sumur.lat, sumur.lng]).addTo(map)
                // Ikat Popup (tetap ada saat diklik untuk detail)
                .bindPopup(popupContent)
                // Ikat Tooltip Permanen (Kelihatan di awal)
                .bindTooltip(tooltipContent, {
                    permanent: true, // Membuatnya selalu terlihat
                    direction: 'top', // Posisikan di atas marker
                    className: 'water-depth-label' // Kelas CSS opsional
                });
        });
    </script>
</body>
</html>
